import Head from "next/head";
import Image from "next/image";
import { Inter } from "next/font/google";
import CodeEditorSVG from "../../components/CodeEditor/CodeEditor";
import AboutMeButton from "../../components/AboutMeButton/AboutMeButton";
import MyProjectsButton from "../../components/MyProjectsButton/MyProjectsButton";
import RedHeartIcon from "../../icons/RedHeartIcon";
import heroStyle from "../styles/hero.module.scss";
import projectsStyle from "../styles/projects.module.scss";
import aboutStyle from '../styles/about.module.scss'
import Navbar from "../../layouts/Navbar";
import ScrollDirection from "../../layouts/ScrollDirection";
import ProjectCard from "../../components/ProjectCard/ProjectCard";
import ReactIcon from "../../icons/ReactIcon";
import JavascriptIcon from "../../icons/JavascriptIcon";
import PythonIcon from "../../icons/PythonIcon";
import DjangoIcon from "../../icons/DjangoIcon";
import MySQLIcon from "../../icons/MySQLIcon";
import NextIcon from "../../icons/NextIcon";
import HTMLIcon from "../../icons/HTMLIcon";
import CSSIcon from "../../icons/CSSIcon";
import FramerMotionIcon from "../../icons/FramerMotionIcon";
import MobileIconsRow from "../../components/MobileIconsRow/MobileIconsRow";
import { AnimatePresence, Reorder } from "framer-motion";
import { useEffect, useState } from "react";

const inter = Inter({ subsets: ["latin"] });

export default function Home() {

   const [cardClicked, setCardClicked] = useState(false)

   function handleCardClick() {
      setCardClicked(true)
   }

   function clearSession () {
      sessionStorage.clear()
   }

   function skipToProjects() {
      window.scroll({
         left: window.innerWidth,
         behavior: 'smooth'
      })
   }

   function skipToAbout() {
      window.scroll({
         left: window.innerWidth * 2,
         behavior: 'smooth'
      })
   }

   useEffect(() => {
      window.addEventListener("beforeunload", clearSession)

      return () => {
         window.removeEventListener("beforeunload", clearSession)
      }
   })

   return (
      <>
         <Head>
            <title>Elbert - Home</title>
            <meta name='description' content='Generated by create next app' />
            <meta
               name='viewport'
               content='width=device-width, initial-scale=1'
            />
            <link rel='icon' href='/favicon.ico' />
         </Head>
         <Navbar>
            <ScrollDirection
               pageNames={["home", "projects", "about"]}
               pageColors={["#c1f7f7", "#c1f7f7", "#c1f7f7"]}>
               <div className={heroStyle.hero}>
                  <div className={heroStyle.heroFirstLine}>
                     <div className={heroStyle.codeEditor}>
                        <CodeEditorSVG
                           id={heroStyle.heroCodeEditor}
                           text='print("Hello World!")'
                           animate={true}
                        />
                     </div>

                     <div className={heroStyle.heroTextWrapper}>
                        <div className={heroStyle.heroText}>
                           <div className={heroStyle.headerText}>
                              <div>Hello World!</div>
                              <div>{"I'm Elbert."}</div>
                           </div>

                           <div className={heroStyle.subheaderText}>
                              {
                                 "Iâ€™m a bioinformatics student with a soft spot for frontend development."
                              }
                              <div className={heroStyle.heartIcon}>
                                 <RedHeartIcon
                                    fontSize='inherit'
                                    display='inline-block'
                                 />
                              </div>
                           </div>

                           <div className={heroStyle.buttonRow}>
                              <MyProjectsButton
                                 id={heroStyle.myProjectsButton}
                                 notifyClick={skipToProjects}
                              />
                              <AboutMeButton 
                                 id={heroStyle.aboutMeButton} 
                                 notifyClick={skipToAbout}
                              />
                           </div>
                        </div>
                     </div>
                  </div>
                  
                  <MobileIconsRow>
                     <HTMLIcon color='#37b0b0' />
                     <CSSIcon color='#37b0b0' />
                     <JavascriptIcon color='#37b0b0' />
                     <NextIcon color='#37b0b0' />
                     <ReactIcon color='#37b0b0' />
                     <FramerMotionIcon color='#37b0b0' />
                     <PythonIcon color='#37b0b0' />
                     <DjangoIcon color='#37b0b0' />
                     <MySQLIcon color='#37b0b0' />
                  </MobileIconsRow>
               </div>
               <div className={projectsStyle.projects}>
                  <div className={projectsStyle.projectCardsWrapper}>
                     <AnimatePresence mode='wait'>
                        {
                        !cardClicked ?
                        (
                        <>
                        <ProjectCard
                           header='COSMOUSE'
                           description='COSMOUSE is a fullstack project powered by React, Django, and a MySQL database. It is a bioinformatics portal integrating protein-protein interaction networks with embryonic expression data obtained from human and mouse models.'
                           imageSrc={"/images/cosmouse.png"}
                           notifyClick={handleCardClick}
                           linkURL={'/projects/cosmouse'}
                        />
                        <ProjectCard
                           header='Alphasense'
                           description='Alphasense augments the predictive accuracy of the existing Missense3D portal for Alphafold models. It is a data/pipeline engineering project built in Python implementing nearest-neighbour search algorithms to deal with 3D protein atomic coordinates.'
                           imageSrc={"/images/alphasense.png"}
                           notifyClick={handleCardClick}
                           linkURL={'/projects/alphasense'}
                        />
                        <ProjectCard
                           header='ICAC Scoresheet'
                           description='Not your typical CRUD app. ICAC Scoresheet was built to solve a very tedious issue in archery competitions - keeping track of scores! It is a mobile-first web app with archer, judges, and admin accounts to get things off pen and paper.'
                           imageSrc={"/images/sample_pic.jpg"}
                           notifyClick={handleCardClick}
                           linkURL={'projects/icac-scoresheet'}
                        />
                        </>
                        ):(
                           <div key='dummyDiv'></div>
                        )}
                     </AnimatePresence>
                  </div>
               </div>
               <div className={aboutStyle.about}>
                  <div className={aboutStyle.aboutContents}>
                     About Me
                  </div>
               </div>
            </ScrollDirection>
         </Navbar>
      </>
   );
}
